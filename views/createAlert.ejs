<%- include('layout/header') %>
<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <div class="conatiner">
                <div class="row">
                    <div class="col-lg-12 mx-auto mt-4">
                        <div class="card shadow">
                            <div class="card-body p-4">
                                <button id="alertButton" class="btn btn-success">Create Alerts</button>
                                <form method="post" id="alertForm" style="display: none;">
                                    <div class="mb-3">
                                      <label for="title" class="form-label">Title:</label>
                                      <input type="text" class="form-control" id="title" placeholder="Enter Title" name="title" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="alertDate">Alert (date):</label>
                                        <input type="date" id="alertDate" name="alertDate" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="alertTime">Alert (time):</label>
                                        <input type="time" id="alertTime" name="alertTime" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="AlertType" class="form-label">Type:</label>
                                        <select name="AlertType" id="AlertType" required>
                                            <option value="Level1">Level 1</option>
                                            <option value="Level2">Level 2</option>
                                            <option value="Level3">Level 3</option>
                                          </select>
                                      </div>
                                    <button type="submit" class="btn btn-primary">Create</button>
                                  </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div> 

            <hr>

            <% if(data){%>
            <div>
                <h2 style="text-align: center;">Created News Updates</h2>
                <hr>
                <table class="table table-strriped">
                    <thead>
                        <tr class="">
                            <th>Title</th>
                            <th>Time</th>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Delete</th>
                        </tr>
                    </thead>
                    <% data.forEach((item)=>{ %>
                        <tr>
                            <td><%=item.title %></td>
                            <td><%=item.timeInput%></td>
                            <td><%=item.AlertDate %></td>
                            <td><%=item.AlertType %></td>
                            <td><form method="post" action="/delete/<%=item._id%> ">
                                <button type="submit" class="btn btn-outline-danger">Delete</button>
                            </form></td>
                        </tr>
                        <% }) %>
                    <tbody>
                        
                    </tbody>
                </table>
            </div>
            <%} %>
        </div>
    </div>
    <h6 style="text-align: center;">Total Active Alerts: <%=AlertCount%></h6>
</div>

<div>
</div>


<script>
  const AlertButton = document.getElementById("alertButton");
  const AlertForm = document.getElementById("alertForm");

  AlertButton.addEventListener("click", () => {
    if (AlertForm.style.display === "none") {
      AlertForm.style.display = "block";
      AlertButton.textContent = "Hide";
    } else {
      AlertForm.style.display = "none";
      AlertButton.textContent = "Create Alerts";
    }
  });
</script>
<%- include('layout/footer') %>

